<div class="memorial-timeline-container">
  <header class="memorial-timeline-header">
    <h1 class="memorial-timeline-title">Interactive Timeline</h1>
    <p class="memorial-timeline-subtitle">Explore historical events and personal milestones in an immersive, animated experience</p>
  </header>

  <div class="memorial-timeline-content">
    <div class="timeline-category-selectors">
      <mat-form-field appearance="fill" class="entity-selector">
        <mat-label>Select Person</mat-label>
        <mat-select (selectionChange)="onPersonFilterChange($event.value)" [value]="selectedPerson">
          <mat-option value="all">All People</mat-option>
          <mat-option value="raymond-sanford">
            <mat-icon>family_restroom</mat-icon>
            Ray Sanford
          </mat-option>
          <mat-option value="jeffrey-sanford">
            <mat-icon>person</mat-icon>
            Jeffrey Sanford
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="type-selector">
        <mat-label>Select Type</mat-label>
        <mat-select (selectionChange)="onTypeFilterChange($event.value)" [value]="selectedType">
          <mat-option value="all">All Types</mat-option>
          <mat-option value="professional">
            <mat-icon>work</mat-icon>
            Professional
          </mat-option>
          <mat-option value="technical">
            <mat-icon>code</mat-icon>
            Technical
          </mat-option>
          <mat-option value="personal">
            <mat-icon>person_outline</mat-icon>
            Personal
          </mat-option>
          <mat-option value="education">
            <mat-icon>school</mat-icon>
            Education
          </mat-option>
          <mat-option value="historical">
            <mat-icon>history</mat-icon>
            Historical
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="selectedPerson !== 'all' && loading" class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Loading timeline events...</span>
    </div>

    <div *ngIf="!loading" class="timeline-display">
      <div *ngIf="selectedPerson === 'all'" class="filter-note">
        <mat-icon>info</mat-icon>
        <p>Select a person to load their curated timeline; use the type filter only if you want to narrow the view.</p>
      </div>

      <div *ngIf="selectedPerson !== 'all'" class="timeline-area">
        <ng-container *ngIf="filteredEvents$ | async as events">
          <div *ngIf="events.length === 0" class="selection-prompt">
            <mat-icon class="prompt-icon">info</mat-icon>
            <h3>No timeline events found</h3>
            <p>Try switching the person or type filters, or confirm the timeline feed is available for your access level.</p>
          </div>

          <div *ngIf="events.length > 0" class="timeline-display-shell">
            <app-timeline-list [events]="events"></app-timeline-list>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
