<div class="jeffrey-ai-container">
  <div class="jeffrey-ai-header">
    <h2>Jeffrey Sanford â€” AI Narrative</h2>
    <button mat-stroked-button color="primary" (click)="regenerateNarratives()">Regenerate Narratives</button>
  </div>

  <p class="muted">AI-curated reflections, developer notes, and artifacts related to Jeffrey Sanford.</p>

  <ng-container *ngIf="jeffreyEvents$ | async as events">
    <div *ngIf="events.length === 0">No Jeffrey-specific events found.</div>

    <div class="cards">
      <mat-card *ngFor="let ev of events" class="jeffrey-card">
        <mat-card-header>
          <mat-card-title>{{ ev.title }}</mat-card-title>
          <mat-card-subtitle>{{ ev.date | date:'longDate' }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>{{ ev.description }}</p>
          <hr />
          <p class="ai-narrative">{{ narratives.get(ev.id || (ev.title + '-' + ev.date)) }}</p>
          <div class="jeffrey-action-row">
            <button mat-stroked-button color="accent" (click)="generateAiForEvent(ev)">Generate AI Narrative</button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-container>
</div>
