@use "sass:map";
@use "sass:color" as color;
@use "./variables" as vars;

.table-wrapper {

  --paginator-offset: 3.5em;

  display: flex !important;
  flex: 1 1 auto !important;
  flex-direction: column !important;
  margin: 0 !important;
  min-height: 0 !important;
  padding: 0 !important;
  position: relative !important;

  &::-webkit-scrollbar {
    height: 0.75em;
    width: 0.75em;
  }

  &::-webkit-scrollbar-thumb {
    background:
      linear-gradient(
        to bottom,
        map.get(vars.$table-theme, patriotic-red),
        map.get(vars.$table-theme, primary-white),
        map.get(vars.$table-theme, patriotic-blue)
      );
    background-clip: content-box;
    border: 3px solid rgb(0 40 104 / 50%);
    border-radius: 1em;
  }

  &::-webkit-scrollbar-track {
    background:
      linear-gradient(
        to bottom,
        rgba(map.get(vars.$table-theme, patriotic-red), 0.1),
        rgba(map.get(vars.$table-theme, primary-white), 0.1),
        rgba(map.get(vars.$table-theme, patriotic-blue), 0.1)
      );
  }

  &::-webkit-scrollbar-button:vertical:start:decrement {
    background-color: transparent;
    height: 1.5em;
    position: relative;
    width: 100%;

    &::after {
      color: map.get(vars.$table-theme, gold);
      content: "â˜…";
      font-size: 1.2em;
      left: 50%;
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
    }
  }

  &::-webkit-scrollbar-button:vertical:end:increment {
    background-color: transparent;
    height: 1.5em;
    position: relative;
    width: 100%;

    &::after {
      background: repeating-linear-gradient(0deg, transparent, transparent 10%, map.get(vars.$table-theme, patriotic-red) 10%, map.get(vars.$table-theme, patriotic-red) 20%);
      content: "";
      height: 70%;
      left: 50%;
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 70%;
    }
  }

  table {
    border-collapse: collapse;
    display: table !important;
    max-height: calc(100% - 2em);
    overflow-y: auto;
    width: 100% !important;

    thead {
      display: table-header-group !important;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    tbody {
      display: table-row-group !important;
    }

    tr {
      display: table-row !important;
      width: 100%;
    }

    th.mat-header-cell {
      background: linear-gradient(180deg, var(--md-sys-color-primary, #6750a4), var(--md-sys-color-primary, #6750a4));
      position: sticky;
      top: 0;
      z-index: 9;
    }

    td.mat-cell mat-icon {
      font-size: 1.1rem;
      height: 1.1rem;
      line-height: 1.1rem;
      width: 1.1rem;
    }

    tr.mat-row:nth-child(odd) {
      background:
        linear-gradient(
          to right,
          rgba(map.get(vars.$table-theme, patriotic-blue), 0.03) 0%,
          rgba(map.get(vars.$table-theme, patriotic-blue), 0.05) 50%,
          rgba(map.get(vars.$table-theme, patriotic-blue), 0.03) 100%
        );
    }

    tr.mat-row:nth-child(even) {
      background:
        linear-gradient(
          to right,
          rgba(map.get(vars.$table-theme, patriotic-red), 0.03) 0%,
          rgba(map.get(vars.$table-theme, patriotic-red), 0.05) 50%,
          rgba(map.get(vars.$table-theme, patriotic-red), 0.03) 100%
        );
    }

    tr.mat-row:hover {
      background-color: rgba(map.get(vars.$table-theme, stars-blue), 0.05);
      box-shadow:
        inset 0 0 0 1px rgba(map.get(vars.$table-theme, gold), 0.25);
      transition: all 0.3s ease;

      td:first-child {
        border-left: 3px solid map.get(vars.$table-theme, patriotic-red);
      }

      td:last-child {
        border-right: 3px solid map.get(vars.$table-theme, patriotic-blue);
      }
    }

    td.mat-cell {
      border-bottom: 0.0625em solid rgba(map.get(vars.$table-theme, silver), 0.3);
      overflow: hidden;
      text-overflow: ellipsis;
      transition: all 0.2s ease-in-out;
      white-space: nowrap;

      &:first-child {
        color: map.get(vars.$table-theme, patriotic-blue);
        font-weight: 500;
      }
    }
  }

  thead,
  tbody tr {
    display: table;
    margin: 0;
    table-layout: fixed;
    width: 100%;
  }

  th,
  td {
    box-sizing: border-box;
    width: auto;
  }

  table.mat-table {
    min-width: 100% !important;
    table-layout: fixed;
    width: 100% !important;

    .mat-header-cell,
    .mat-cell {
      box-sizing: border-box;
      justify-content: flex-start !important;
      overflow: hidden;
      text-align: left !important;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }

  table.stripped {
    display: table !important;
    overflow-x: hidden;
  }
}
