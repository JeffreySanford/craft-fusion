@use 'sass:map';
@use './variables' as vars;

.table-wrapper {
  /* Space control for paginator offset (increased by 1em) */
  --paginator-offset: 3.5em;
  display: flex !important;
  flex-direction: column !important;
  position: relative !important;
  flex: 1 1 auto !important;
  min-height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;

  &::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  &::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, map.get(vars.$table-theme, patriotic-red), map.get(vars.$table-theme, primary-white), map.get(vars.$table-theme, patriotic-blue));
    border-radius: 16px;
    border: 3px solid rgba(0, 40, 104, 0.5);
    background-clip: content-box;
  }

  &::-webkit-scrollbar-track {
    background: linear-gradient(
      to bottom,
      rgba(map.get(vars.$table-theme, patriotic-red), 0.1),
      rgba(map.get(vars.$table-theme, primary-white), 0.1),
      rgba(map.get(vars.$table-theme, patriotic-blue), 0.1)
    );
  }

  &::-webkit-scrollbar-button:vertical:start:decrement {
    background-color: transparent;
    height: 24px;
    width: 100%;
    position: relative;

    &::after {
      content: 'â˜…';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: map.get(vars.$table-theme, gold);
      font-size: 1.2em;
    }
  }

  &::-webkit-scrollbar-button:vertical:end:increment {
    background-color: transparent;
    height: 24px;
    width: 100%;
    position: relative;

    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70%;
      height: 70%;
      background: repeating-linear-gradient(0deg, transparent, transparent 10%, map.get(vars.$table-theme, patriotic-red) 10%, map.get(vars.$table-theme, patriotic-red) 20%);
    }
  }

  table {
    width: 100%;

    display: table !important;

    thead {
      position: sticky;
      top: 0;
      z-index: 10;
      display: table-header-group !important;
    }

    tbody {
      display: table-row-group !important;
    }

    tr {
      display: table-row !important;
      width: 100%;
    }

    th.mat-header-cell {
      position: sticky;
      top: 0;

      background: linear-gradient(180deg, var(--md-sys-color-primary, #6750a4), var(--md-sys-color-primary, #6750a4));
      z-index: 9;
    }

    max-height: calc(100% - 2em);
    overflow-y: auto;
    border-collapse: collapse;
    width: 100% !important;

    td.mat-cell mat-icon {
      font-size: 1.1rem;
      width: 1.1rem;
      height: 1.1rem;
      line-height: 1.1rem;
    }

    tr.mat-row:nth-child(odd) {
      background: linear-gradient(
        to right,
        rgba(map.get(vars.$table-theme, patriotic-blue), 0.03) 0%,
        rgba(map.get(vars.$table-theme, patriotic-blue), 0.05) 50%,
        rgba(map.get(vars.$table-theme, patriotic-blue), 0.03) 100%
      );
    }

    tr.mat-row:nth-child(even) {
      background: linear-gradient(
        to right,
        rgba(map.get(vars.$table-theme, patriotic-red), 0.03) 0%,
        rgba(map.get(vars.$table-theme, patriotic-red), 0.05) 50%,
        rgba(map.get(vars.$table-theme, patriotic-red), 0.03) 100%
      );
    }

    tr.mat-row:hover {
      background-color: rgba(map.get(vars.$table-theme, stars-blue), 0.05);
      box-shadow: inset 0 0 0 1px rgba(map.get(vars.$table-theme, gold), 0.5);
      transition: all 0.3s ease;

      td:first-child {
        border-left: 3px solid map.get(vars.$table-theme, patriotic-red);
      }

      td:last-child {
        border-right: 3px solid map.get(vars.$table-theme, patriotic-blue);
      }
    }

    td.mat-cell {
      border-bottom: 0.0625em solid rgba(map.get(vars.$table-theme, silver), 0.3);
      transition: all 0.2s ease-in-out;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;

      &:first-child {
        font-weight: 500;
        color: map.get(vars.$table-theme, patriotic-blue);
      }
    }
  }

  thead,
  tbody tr {
    display: table;
    width: 100%;
    table-layout: fixed;
    margin: 0;
  }

  th,
  td {
    width: auto;
    box-sizing: border-box;
  }

  table.mat-table {
    min-width: 100% !important;
    width: 100% !important;
    table-layout: fixed;

    .mat-header-cell,
    .mat-cell {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      box-sizing: border-box;
      text-align: left !important;
      justify-content: flex-start !important;
    }
  }

  table.stripped {
    display: table !important;
    overflow-x: hidden;
  }
}
