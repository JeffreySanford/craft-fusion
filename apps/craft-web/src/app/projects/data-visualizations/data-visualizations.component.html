<div class="visualization-container" cdkDropList (cdkDropListDropped)="drop($event)">
  <div *ngFor="let chart of charts; let i = index" 
       class="visualization-item"
       [ngClass]="'size-' + (chart.size || 'medium')"
       cdkDrag>
    <mat-card class="chart-card" 
              [class.expanded]="expandedTileIndex === i"
              (click)="openTile(i)">
      <mat-card-header cdkDragHandle>
        <mat-card-title class="chart-title">{{ chart.name }}</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <div class="chart-content">
          <ng-container [ngSwitch]="chart.component">
            <app-line-chart *ngSwitchCase="'app-line-chart'" [data]="chart.data"></app-line-chart>
            <app-bar-chart *ngSwitchCase="'app-bar-chart'" [data]="chart.data"></app-bar-chart>
            <app-finance-chart *ngSwitchCase="'app-finance-chart'" [data]="chart.data"></app-finance-chart>
            <app-fire-alert *ngSwitchCase="'app-fire-alert'"></app-fire-alert>
            <app-quantum-fisher-tile *ngSwitchCase="'app-quantum-fisher-tile'"></app-quantum-fisher-tile>
            <div *ngSwitchDefault>Unknown chart type</div>
          </ng-container>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
