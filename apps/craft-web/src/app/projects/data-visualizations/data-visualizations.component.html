<ng-container *ngIf="isMobile; else desktopView">
  <!-- Ionic View for Mobile -->
  <ion-content>
    <ion-grid>
      <ion-row>
        <ion-col
          size="12"
          size-md="6"
          size-lg="4"
          *ngFor="let chart of charts; let i = index"
        >
          <ion-card
            (click)="openTile(i)"
            (keydown.enter)="openTile(i)"
            (keydown.space)="openTile(i)"
            tabindex="0"
            class="chart-card"
            [class.expanded]="expandedTileIndex === i"
          >
            <ion-card-header>
              <ion-card-title>{{ chart.name }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ng-container *ngIf="chart.component === 'app-line-chart'">
                <app-line-chart [data]="chart.data"></app-line-chart>
              </ng-container>
              <ng-container *ngIf="chart.component === 'app-bar-chart'">
                <app-bar-chart [data]="chart.data"></app-bar-chart>
              </ng-container>
              <ng-container *ngIf="chart.component === 'app-fintech-chart'">
                <app-fintech-chart [data]="chart.data"></app-fintech-chart>
              </ng-container>
              <ng-container *ngIf="chart.component === 'app-map-chart'">
                <app-map-chart [data]="chart.data"></app-map-chart>
              </ng-container>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>
</ng-container>

<ng-template #desktopView>
  <!-- Angular Material View for Desktop -->
  <mat-grid-list cols="3" rowHeight="2:1">
    <mat-grid-tile *ngFor="let chart of charts; let i = index">
      <mat-card
        (click)="openTile(i)"
        (keydown.enter)="openTile(i)"
        (keydown.space)="openTile(i)"
        tabindex="0"
        class="chart-card"
        [class.expanded]="expandedTileIndex === i"
      >
        <mat-card-header>
          <mat-card-title>{{ chart.name }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <ng-container *ngIf="chart.component === 'app-line-chart'">
            <app-line-chart [data]="chart.data"></app-line-chart>
          </ng-container>
          <ng-container *ngIf="chart.component === 'app-bar-chart'">
            <app-bar-chart [data]="chart.data"></app-bar-chart>
          </ng-container>
          <ng-container *ngIf="chart.component === 'app-fintech-chart'">
            <app-fintech-chart [data]="chart.data"></app-fintech-chart>
          </ng-container>
          <ng-container *ngIf="chart.component === 'app-map-chart'">
            <app-map-chart [data]="chart.data"></app-map-chart>
          </ng-container>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
</ng-template>
