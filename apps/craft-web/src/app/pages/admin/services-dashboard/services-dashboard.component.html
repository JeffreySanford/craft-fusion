<div class="services-dashboard">
  <div class="dashboard-header">
    <h2>Services Dashboard</h2>
    <div class="summary-cards">
      <div class="summary-card">
        <div class="card-value">{{services.length}}</div>
        <div class="card-label">Total Services</div>
      </div>
      <div class="summary-card">
        <div class="card-value">{{services.filter(s => s.status === 'active').length}}</div>
        <div class="card-label">Active</div>
      </div>
      <div class="summary-card error">
        <div class="card-value">{{services.filter(s => s.status === 'error').length}}</div>
        <div class="card-label">With Errors</div>
      </div>
      <div class="summary-card inactive">
        <div class="card-value">{{services.filter(s => s.status === 'inactive').length}}</div>
        <div class="card-label">Inactive</div>
      </div>
    </div>
  </div>

  <div class="services-section">
    <h3>Core Services</h3>
    <table mat-table [dataSource]="coreServices" class="mat-elevation-z2">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Service</th>
        <td mat-cell *matCellDef="let service">
          <div class="service-name">{{service.name}}</div>
          <div class="service-desc">{{service.description}}</div>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let service">
          <span class="status-indicator" [ngClass]="getStatusClass(service.status)"></span>
          {{service.status | titlecase}}
        </td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let service">{{service.type | titlecase}}</td>
      </ng-container>

      <ng-container matColumnDef="lastActivity">
        <th mat-header-cell *matHeaderCellDef>Last Activity</th>
        <td mat-cell *matCellDef="let service">{{formatLastActivity(service.lastActivity)}}</td>
      </ng-container>

      <ng-container matColumnDef="usageCount">
        <th mat-header-cell *matHeaderCellDef>Usage</th>
        <td mat-cell *matCellDef="let service">{{service.usageCount}}</td>
      </ng-container>

      <ng-container matColumnDef="errorCount">
        <th mat-header-cell *matHeaderCellDef>Errors</th>
        <td mat-cell *matCellDef="let service">{{service.errorCount}}</td>
      </ng-container>

      <ng-container matColumnDef="successRate">
        <th mat-header-cell *matHeaderCellDef>Success Rate</th>
        <td mat-cell *matCellDef="let service">
          {{service.successRate !== undefined ? (service.successRate | number:'1.0-0') + '%' : 'N/A'}}
        </td>
      </ng-container>

      <ng-container matColumnDef="avgResponseTime">
        <th mat-header-cell *matHeaderCellDef>Avg Response</th>
        <td mat-cell *matCellDef="let service">
          {{service.avgResponseTime !== undefined ? (service.avgResponseTime | number:'1.0-0') + 'ms' : 'N/A'}}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="services-section" *ngIf="featureServices.length > 0">
    <h3>Feature Services</h3>
    <table mat-table [dataSource]="featureServices" class="mat-elevation-z2">
      <!-- Same column definitions as above -->
    </table>
  </div>
  
  <div class="services-section" *ngIf="thirdPartyServices.length > 0">
    <h3>Third-Party Services</h3>
    <table mat-table [dataSource]="thirdPartyServices" class="mat-elevation-z2">
      <!-- Same column definitions as above -->
    </table>
  </div>
</div>
