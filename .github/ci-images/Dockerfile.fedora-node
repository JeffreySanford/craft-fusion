FROM registry.fedoraproject.org/fedora:latest

RUN dnf -y update && \
    dnf install -y git curl gcc-c++ make python3 which rpm-build && \
    dnf clean all

# Install Node 20 from NodeSource
RUN curl -fsSL https://rpm.nodesource.com/setup_20.x | bash - && \
    dnf install -y nodejs && \
    node --version && npm --version

# Enable corepack and install pnpm
RUN corepack enable && corepack prepare pnpm@latest --activate && pnpm --version

WORKDIR /workspace

CMD ["/bin/bash"]
